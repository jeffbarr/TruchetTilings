![Page Header](Images/header_site.png)

# Introduction

This repository contains [OpenSCAD](https://openscad.org/) code to generate rectangular grids of hexagons in a form similar to those found in [Kerry Mitchell](https://www.kerrymitchellart.com/)'s 2020 paper, [Generalizations of Truchet Tiles](https://archive.bridgesmathart.org/2020/bridges2020-191.pdf). In that paper, Kerry presented a seemingly simple set of patterns that can be combined in presudo-random or organized/structured ways to produce interesting patterns:

![Mitchell figure A](Images/mitchell_fig_a.png)

# Examples

Here are a few examples of grids generated by this program and printed on a [Prusa XL](https://www.prusa3d.com/en/product/original-prusa-xl-assembled-5-toolhead-3d-printer/) using 4 colors:

| TruchetMode(CircledTriad) | TruchetMode(3-4-5-6), Seed(131313) |
| --- | --- |
| ![Example 1](Images/ht_example_1.jpg) | ![Example 2](Images/ht_example_2.jpg) |
| **TruchetMode(5),RotateFactor(7),RotateMod(3)** | |
| ![Example 3](Images/ht_example_3.jpg) | | 

# Features

Here is an incomplete list of program features:

* Generate grids of hexagons suitable for 3D printing as a single "mat" or spaced out for printing on fabric
* Hexagons can be any desired size
* Optional edge around each hexagon
* Grid can be any printable size
* Controlled use of hexagon patterns (also known as arcs in the code)
* Control of borders and corners
* Pseudo-random patterns with control of the random seed
* Predetermined patterns (just one so far)
* Combine multiple mats into a larger design, with edges that interlock properly
* Supports multi-color/multi-extruder printers, one STL per color/extruder

# Getting Started

Install the [latest nightly build](https://openscad.org/downloads.html#snapshots) of OpenSCAD, launch it, and then open the **Preferences**. Click on **Features** and check **object-function**:

![OpenSCAD Features Preferences](Images/openscad_prefs.jpg)

Download [hexagons_truchet.scad](hexagons_truchet.scad) and open it in OpenSCAD. Make sure that the OpenSCAD [Customizer](https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/Customizer) is visible, and you are good to go. Simply make a change in the Customizer wait a second, and the display will update.

Now spend the next hour or two experimenting with the various options in the Customizer. When you are ready to create some STL files and slice them for printing, refer to the next section.

# Saving, Loading, and Slicing a Grid

**Important Sanity Tip**: Before you get too far into this rat-hole, spend some time thinking about and implementing a naming scheme for your configurations, STL files, and GCODE files. If you are using the script below to create multiple mats to form a long and/or wide design, you will end up with 52 STL files per configuration. Good naming, and perhaps a log of your work, will be of immense value here.

After you have designed the grid of your dreams, you are ready to render, save, slice, and print it. To do this you use the **WhichExtruder** item in the Customizer:

![Customizer WhichExtruder](Images/openscad_ht_extruder_choice.jpg)

Set it to 1, press F6 (Render), wait for the render to finish, then press F7 to save the STL. Repeat this for each extruder. You will end up with four (at most) STL files. 

Now go to your slicer and open all four of the STL files at the same time:

![Open 4 files in Slicer](Images/open_stls_four.jpg)

If you are using PrusaSlicer, answer Yes to this question:

![Load Multiple](Images/prusaslicer_multi_load.jpg)

This will assign a unique extruder to each of the STL files:

![Extruders Assigned](Images/ht_573_extruders.jpg)

Slice, choose some amazing colors, and print!

Here is the overall flow:

```mermaid
flowchart LR
    A[Configuration]
    O[OpenSCAD]
    E1[Extruder 1 STL]
    E2[Extruder 2 STL]
    E3[Extruder 3 STL]
    E4[Extruder 4 STL]

    A --> O
    O --> |F6/F7| E1
    O --> |F6/F7| E2
    O --> |F6/F7| E3
    O --> |F6/F7| E4

    E1 --> Slicer
    E2 --> Slicer
    E3 --> Slicer
    E4 --> Slicer

    Slicer --> GCODE
    GCODE --> Printer
```


# Options

This section contains a description of each of the items in the Customizer. Once you start using this program in "production mode" and you need to be able to repeat and recall settings on demand, use OpenSCAD's preset menu (if you can figure out how it works :-)), take a screen shot of the Customizer, or capture this line in the Console output:

```
ECHO: { ArcExtruder = 2; ArcHeight = 0.2; ArcWidth = 1.4; CountX = 14; CountY = 17; EdgeExtruder = 4; EdgeHeight = 0.2; EdgeWidth = 1.2; FillExtruder = 3; Gap = 0; HexHeight = 0.4; HexRadius = 13; RandomSeed = 131313; Rotate = true; RotateFactor = 4; RotateMod = 3; TileExtruder = 1; TruchetMode = "5"; XYLabels = false; StartX = 0; LeftBorder = false; RightBorder = false; TopBorder = false; BottomBorder = false; TopLeftCorner = false; TopRightCorner = false; BottomLeftCorner = false; BottomRightCorner = false; }
```
All of the values in the Customizer are represented there. At some point there will be a way to turn this into a preset or a JSON file.

Experiment with all of the items and have a lot of fun as you do so.

## Hexagons

![Hexagon Customizer Options](Images/cust_hexagons.jpg)

The values in this section control the size and other aspects of each hexagon:

* HexRadius - 
* HexHeight - 
* ArcHeight - 
* ArcWidth - 
* EdgeHeight - 
* EdgeWidth - 
* XYLabels - 
  
## Truchet

![Truchet Customizer Options](Images/cust_truchet.jpg)

* TruchetMode
* Rotate
* RotateFactor
* RotateMod

## Grid

![Grid Customizer Options](Images/cust_grid.jpg)

* CountX
* CountY
* Gap
* RandomSeed
  
## Mat / Borders / Corners

![Mat Border Corner Customizer Options](Images/cust_mat_borders_corners.jpg)

* Mat -

* LeftBorder -
* RightBorder -
* TopBorder -
* BottomBorder -

* BottomLeftCorner -
* TopLeftCorner -
* BottomRightCorner -
* TopRightCorner -

## Extruders

![Extruder Options](Images/cust_extruders.jpg)

* TileExtruder - 
* ArcExtruder - 
* FillExtruder - 
* EdgeExtruder -
* WhichExtruder -

# Creating Multi-Print Mats

# Tools

# Ideas

# Please Reference Me / This

# Truchet References
